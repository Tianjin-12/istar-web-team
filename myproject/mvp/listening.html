<!DOCTYPE html>
            <html>
            <head>
                <title>Redirecting to Login</title>
            </head>
            <body>
                <script>
                    // 打开登录页面
                    var loginWindow = window.open('{login_url_with_next}', '_blank');
                    // 定期检查登录窗口是否关闭
                    var checkInterval = setInterval(function() {{
                        if (loginWindow.closed) {{
                            clearInterval(checkInterval);
                            // 检查用户是否已登录
                            fetch('accounts/api/auth_check/')
                                .then(response => response.json())
                                .then(data => {{
                                    if (data.authenticated) {{
                                        window.location.reload();
                                    }}
                                }})
                                .catch(error => {{
                                    console.error('Error checking auth status:', error);
                                }});
                        }}
                    }}, 1000);
                </script>
            </body>
            </html>